# JUSE

**JU**niorì—ì„œ **SE**niorê°€ ë ë•Œê¹Œì§€, ê·¸ë¦¬ê³  ê·¸ ë’¤ì—ë„.

<img src='./client/public/JUSE.png'>

## ğŸ‘¨â€ğŸ‘§í”„ë¡œì íŠ¸ ì†Œê°œ

### ê°œë°œìë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸/ìŠ¤í„°ë”” ëª¨ì§‘ í”Œë«í¼, [JUSE](https://chicken-milktea-juse.com/)

ì¢‹ì€ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ê°€ ë˜ê¸° ìœ„í•´ì„œëŠ” ì£¼ë‹ˆì–´ë¶€í„° ì‹œë‹ˆì–´ê°€ ë˜ê¸°ê¹Œì§€, ë˜í•œ ì‹œë‹ˆì–´ê°€ ë˜ì–´ì„œë„ í•™ìŠµê³¼ ê³ ë¯¼ì„ ë©ˆì¶”ì–´ì„  ì•ˆë˜ê² ì£ .

ê·¸ëŸ¬ë‚˜ ë°©ëŒ€í•œ ì§€ì‹ì„ í˜¼ì ìŠµë“ í•˜ëŠ” ê²ƒì€ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°™ì€ ëª©ì ì„ ê°€ì§„ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ í•œë‹¤ë©´ ë” ë¹¨ë¦¬, ë§ì´ ë°°ìš¸ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œ ê²ƒì´ JUSEì˜ ì¶œë°œì ì…ë‹ˆë‹¤.
</br>

> ê°œë°œ ê¸°ê°„: 2022.09.07 - 2022.10.12 (5ì£¼, íŒ€ í”„ë¡œì íŠ¸), v1.1 ~ v1.3 </br>
> ì¶”ê°€ ê°œë°œ: 2022.11.01 - í˜„ì¬ (ê°œì¸ í”„ë¡œì íŠ¸), 2.1.1 ~ 2.1.5
</br>

v1.xëŠ” í”„ë¡œì íŠ¸ ê¸°ê°„ ë‚´ì— í”„ë¡ íŠ¸, ë°±ì—”ë“œ íŒ€ì´ í•¨ê»˜ ì‘ì—…í•œ ë²„ì „ì…ë‹ˆë‹¤.
</br>
v2.xëŠ” í”„ë¡œì íŠ¸ ê¸°ê°„ ì´í›„ ê°œì¸ì ìœ¼ë¡œ ì¶”ê°€ ì‘ì—…ì„ ì‹¤ì‹œí•œ ë²„ì „ì…ë‹ˆë‹¤.


## ë°°í¬

- í˜„ì¬ ìµœì‹  ë²„ì „: v2.1.5
- ë°°í¬ ë²„ì „ ë³„ ë‚´ì—­ì€ [release note](https://github.com/thom-droid/milktea-juse/wiki/Release-Note-v1.x#v110) ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì„œë²„ êµ¬ì„±

### v1.x
<details>
<summary> ìƒì„¸ë³´ê¸° </summary>
<img src='materials/juse_architecture_v1.png'>

í´ë¼ì´ì–¸íŠ¸ëŠ” Netlifyë¥¼ í†µí•´ ë°°í¬í•˜ì—¬ https í†µì‹ ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. github repositoryì™€ ì—°ë™í•˜ì—¬ íŠ¹ì • ë¸Œëœì¹˜ì— pushë  ë•Œ ë¹Œë“œí•˜ì—¬ ë°°í¬ë˜ë„ë¡ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.
</br>
</br>
ë°±ì—”ë“œ ì„œë²„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ DB, ì´ë¯¸ì§€ ì„œë²„ ëª¨ë‘ ì—¬ë¶„ì˜ ë°ìŠ¤í¬íƒ‘ì—ì„œ ì˜¨í”„ë ˆë¯¸ìŠ¤ë¡œ êµ¬ì„±í•˜ì˜€ìœ¼ë©°, í¬íŠ¸ í¬ì›Œë”©ì„ í†µí•´ ì™¸ë¶€ì™€ í†µì‹ ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
</br>
</br>
HTTPS í†µì‹ ì„ í•˜ê¸° ìœ„í•´ ë¬´ë£Œ ë„ë©”ì¸ ë° SSL ì¸ì¦ì„œë¥¼ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì„œë²„ì™€ í†µì‹ ì´ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
</details>


### v2.x.x

v2ë¶€í„°ëŠ” í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¡œ ì„œë²„ êµ¬ì„±ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. 

<img src='materials/juse_architecture_v2.png'>

í´ë¼ì´ì–¸íŠ¸ ì„œë²„ëŠ” ë¹Œë“œëœ ì½”ë“œë¥¼ static web server ì—­í• ì„ í•˜ëŠ” ë²„í‚·ì— ë°°í¬í•©ë‹ˆë‹¤. ì´ ë²„í‚·ì€ CloudFront ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ì˜¤ë¦¬ì§„ìœ¼ë¡œ ì„¤ì •í•˜ì˜€ê³ , 
ìºì‹±ëœ ì‚¬ë³¸ì€ ì—£ì§€ì¸ CloudFrontì—ì„œ ê´€ë¦¬í•˜ë©° í´ë¼ì´ì–¸íŠ¸ë¡œ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ë•Œ ì´ ìºì‹œê°€ ì‚¬ìš©ë©ë‹ˆë‹¤. CloudFrontëŠ” https ë¡œ í†µì‹ í•˜ë„ë¡ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.
</br>
</br>
ë°±ì—”ë“œ ì„œë²„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ê³  ìˆëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ ì•ì— ALBë¥¼ ë‘ê³  ìˆìœ¼ë©°, ALBëŠ” https í†µì‹ ì„ í•˜ë„ë¡ ì„¤ì •ë˜ì–´ìˆìœ¼ë¯€ë¡œ ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ í•„í„°ë§í•˜ëŠ” í”„ë¡ íŠ¸ í”„ë¡ì‹œ ì—­í• ì„ í•˜ê²Œ ë©ë‹ˆë‹¤
(í˜„ì¬ ë²„ì „ì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ í•˜ë‚˜ë§Œ ì„¤ì •ë˜ì–´ ìˆì–´ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ê¸°ëŠ¥ì€ í•˜ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤).
</br>
</br>
EC2ì—ì„œ ì‹¤í–‰ë˜ëŠ” spring boot ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ëŠ” http í†µì‹ ì„ ì§„í–‰í•©ë‹ˆë‹¤. DBëŠ” RDS MySQLì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. 
</br>
</br>
Route53 ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ìš”ì²­ì„ ì„¤ì •ëœ ì£¼ì†Œì— ë§ê²Œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤. 
í´ë¼ì´ì–¸íŠ¸ ì„œë²„ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì€ CloudFrontë¡œ, ë°±ì—”ë“œ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ìš”ì²­ì€ ALBë¡œ ê°ê° ë¼ìš°íŒ…í•©ë‹ˆë‹¤. 
ë„ë©”ì¸ì„ AWSê°€ ì•„ë‹Œ ì™¸ë¶€ì—ì„œ êµ¬ì…í•˜ì˜€ìœ¼ë¯€ë¡œ, ë„ë©”ì¸ ì£¼ì†Œë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì€ AWS ë¦¬ì†ŒìŠ¤ë¡œ ë¼ìš°íŒ… ë˜ë„ë¡ ë„¤ì„ì„œë²„ë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
</br>
</br>

### CI/CD
Github ë ˆí¬ì§€í† ë¦¬ì˜ main ë¸Œëœì¹˜ì— push ì‘ì—…ì´ ë°œìƒí–ˆì„ ê²½ìš° Github Actionsì„ í†µí•´ main ë¸Œëœì¹˜ì— ìˆëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸, ì••ì¶• ë° ë¹Œë“œí•˜ê³ , CodeDeploy ê°€ AWS ì„œë¹„ìŠ¤ì— ì••ì¶• íŒŒì¼ ë° ë¹Œë“œ ê²°ê³¼ë¬¼ì„ ì „ë‹¬í•˜ë„ë¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. 
ì´ ë•Œ ì••ì¶• íŒŒì¼ì€ ë²„ì €ë‹ì„ ìœ„í•´ S3 ë²„í‚·ì— ì €ì¥í•˜ê³ , ë¹Œë“œëœ íŒŒì¼ì€ EC2ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. 
EC2ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ìë°” í”„ë¡œì„¸ìŠ¤ë¥¼ í™•ì¸í•˜ê³ , ìˆìœ¼ë©´ ì¢…ë£Œ ì‹œí‚¨ ë’¤ ìƒˆë¡œ ì „ë‹¬ë°›ì€ ë¹Œë“œë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤.
</br>
</br>

### ì†Œì…œ ë¡œê·¸ì¸
OAuth2ì— ê¸°ë°˜í•˜ì—¬ Githubê³¼ Googleì— ì¸ì¦ ì‘ì—…ì„ ìœ„ì„í•©ë‹ˆë‹¤. 
EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‘ì—…ì„ ìš”ì²­í•˜ê²Œ ë˜ë©° ì´ ë•Œ ì±„íƒëœ ë°©ì‹ì€ Authorization Code Grant ì…ë‹ˆë‹¤. ì•„ë˜ëŠ” JUSEì—ì„œ ì†Œì…œ ë¡œê·¸ì¸ì´ ì§„í–‰ë˜ëŠ” íë¦„ì…ë‹ˆë‹¤.
</br>
</br>
<img src='materials/juse_oauth2_social_login.jpg'>

í´ë¼ì´ì–¸íŠ¸ ì•±(ë¦¬ì•¡íŠ¸ ì•±)ì—ì„œ ìœ ì € ì •ë³´ ë™ì˜ë¥¼ ì–»ìœ¼ë©´ ë°±ì—”ë“œ ì•±(ìŠ¤í”„ë§ ì•±)ìœ¼ë¡œ ì§€ì •ëœ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
</br>
</br>
ìŠ¤í”„ë§ì—ì„œëŠ” êµ¬ê¸€, ê¹ƒí—™ì˜ ì¸ê°€ ì„œë²„ì— ì„¤ì •í•´ë†“ì€ ë¦¬ë‹¤ì´ë ‰ì…˜ URIë¡œ ì¸ê°€ ì½”ë“œë¥¼ ìš”ì²­í•˜ê³ , ì´ ì½”ë“œë¥¼ í†µí•´ ì‹¤ì œ ìœ ì € ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” êµ¬ê¸€, ê¹ƒí—™ì˜ ë¦¬ì†ŒìŠ¤ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì ‘ê·¼ í† í°ì„ ì–»ì–´ì˜µë‹ˆë‹¤.
</br>
</br>
ì´ í† í°ì„ í†µí•´ ì§€ì •ëœ ë²”ìœ„ë§Œí¼ì˜ ì •ë³´(ì´ë©”ì¼, í”„ë¡œí•„ ì‚¬ì§„ ì£¼ì†Œ ë“±)ë¥¼ ë¦¬ì†ŒìŠ¤ ì„œë²„ì—ì„œ ì–»ì–´ì˜µë‹ˆë‹¤. ì •ë³´ë¥¼ ì–»ì–´ì˜¤ëŠ” ë° ì„±ê³µí•˜ë©´ JWTë¥¼ ë°œê¸‰í•˜ì—¬ í”„ë¡ íŠ¸ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
</br>
</br>

## í”„ë¡œì íŠ¸ êµ¬ì¡°

MVC íŒ¨í„´ê³¼ ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ë¥¼ í™œìš©í•œ ëª¨ë†€ë¦¬ì‹ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. 
</br>
</br>
ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì— í¬í•¨ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì½”ë“œ ê°„ì˜ ì¢…ì†ì„±ì´ ë†’ì§€ë§Œ, ìœ ì§€ë³´ìˆ˜ì™€ í…ŒìŠ¤íŠ¸, ë””ë²„ê¹…, ë°°í¬ê°€ ë¹„êµì  ìˆ˜ì›”í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ì „í†µì ì¸ ì›¹ ê°œë°œ ë°©ì‹ì´ë¯€ë¡œ ë ˆí¼ëŸ°ìŠ¤ê°€ í’ë¶€í•˜ê³ , íŠ¸ë˜í”½ì´ ë§ì§€ ì•Šì€ í”„ë¡œì íŠ¸ì— ë„ì…í•˜ê¸° ì í•©í•˜ì˜€ìŠµë‹ˆë‹¤.    
</br>

## DB 

<img src='materials/juse_database_scheme.png'>

ì™¸ë˜í‚¤ë¥¼ í†µí•´ N:1, N:M ë“±ì˜ í…Œì´ë¸”ì˜ ê´€ê³„ë¥¼ í‘œí˜„í•˜ì˜€ê³ , íŒ€ì›ê³¼ì˜ ë…¼ì˜ë¥¼ í†µí•´ ì •ê·œí™”ë¥¼ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. 
</br>
</br>
í”„ë¡œì íŠ¸ ì´ˆë°˜ ë‹¨ê³„ì—ì„œëŠ” h2 ì™€ hibernate ì„¤ì •ìœ¼ë¡œ ìŠ¤í‚¤ë§ˆë¥¼ ìë™ ìƒì„±ë˜ë„ë¡ í•˜ì—¬ ë™ì‘ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ì‹¤ì œ ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” MySQL workbenchë¥¼ í†µí•´ ìŠ¤í‚¤ë§ˆë¥¼ ì‘ì„±í•œ ë’¤ ë¡œì»¬ ì„œë²„ë¥¼ í†µí•´ ì‘ì—…í•˜ì˜€ìŠµë‹ˆë‹¤.
</br>
</br>

### íŠ¸ëœì­ì…˜ ê´€ë¦¬
Springì—ì„œ ì§€ì›í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. MySQL 8.0ì˜ ê¸°ë³¸ì—”ì§„ì¸ InnoDBì˜ ë””í´íŠ¸ ì„¤ì •(repeatable read)ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ê° íŠ¸ëœì­ì…˜ì— ì‹ë³„ ë²ˆí˜¸ë¥¼ ë¶€ì—¬í•˜ì—¬ í•´ë‹¹ íŠ¸ëœì­ì…˜ì´ ì‘ì—…í•˜ê³  ìˆëŠ” ë ˆì½”ë“œê°€ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.   
</br>
#### ë™ê¸° ì‘ì—…

ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œ íŠ¸ëœì­ì…˜ë“¤ì˜ ìˆœì„œë¥¼ ì§€ì •í•˜ê³  í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì‘ì—…ì— ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
</br>
</br>
`@Transactional`ì˜ ê¸°ë³¸ì„¤ì •ì¸ `Propagation.REQUIRED` ë¥¼ í†µí•´ í•´ë‹¹ ë©”ì„œë“œì— í¬í•¨ë˜ì–´ ìˆëŠ” ì‘ì—…ë“¤ì´ í•œ ìŠ¤ë ˆë“œë¡œ ë¬¶ì—¬ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤ (ì§ì ‘ ì„¤ì •í•œ ê°ì²´ ê·¸ë˜í”„ë‚˜ DTOê°€ ì•„ë‹Œ JPA í”„ë¡ì‹œ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë„ ì„¸ì…˜ ìœ ì§€ê°€ í•„ìš”í•˜ë¯€ë¡œ ì„¤ì •í•´ì¤€ ë¶€ë¶„ë„ ìˆìŠµë‹ˆë‹¤).
</br>
</br>
ë”°ë¼ì„œ í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‹¤í–‰ ì¤‘ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ë˜ë©´ ì»¤ë°‹ì´ ë˜ì§€ ì•Šê³  ë¡¤ë°±ì´ ë©ë‹ˆë‹¤ (ë¡¤ë°± ì •ì±…ì€ `@Transactional`ì˜ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ í•˜ì—¬, ëŸ°íƒ€ì„ ì˜ˆì™¸(unchecked exception) ë°œìƒ ì‹œ ë¡¤ë°±ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤). 

```java
public class BoardServiceImpl {
    
    private final UserService userService;
    private final TagService tagService;
    private final BoardReopsitory boardReopsitory;
    
    // constructor
    
    @Transactional
    public Board create(Board post){
        User user = userService.verifyByUser(post.getUser());
        Tag tag = tagService.verifyByTagName(post.getTagName());
        return boardReopsitory.save(post);
    }    
}

```
<br>

#### ë¹„ë™ê¸° ì‘ì—… (ì´ë²¤íŠ¸ ì²˜ë¦¬)
íŠ¹ì • ì‘ì—… í›„ ì•Œë¦¼ì´ ë°œí–‰ë˜ëŠ” ì´ë²¤íŠ¸ì˜ ê²½ìš° ì•ì˜ ì‘ì—…ì´ ì™„ë£Œëœ í›„ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ê³ , ì•Œë¦¼ ë°œí–‰ ìì²´ê°€ ë™ê¸°ì ìœ¼ë¡œ ì§„í–‰ë  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹ëœ í›„ ë¹„ë™ê¸° ìŠ¤ë ˆë“œë¡œ ì‘ë‹µí•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

```java
@Service
public class ApplicationServiceImpl implements ApplicationService {
    
    @Override
    @Transactional
    public Appilcation create(Application obj) {
        
        // ... obj ìœ íš¨ì„± ê²€ì¦ ì½”ë“œ
        
        // ì•Œë¦¼ ê°ì²´ ìƒì„± ë° ì—”í‹°í‹° persist
        Notification notification = Notification.of(Type.NEW_APPLICATION, obj.getUser(), obj.getUrl());
        Application application = applicationRepository.save(obj);
        
        // ì´ë²¤íŠ¸ ë°œí–‰
        eventPublisher.publishEvent(new NotificationEvent(this, notification));
        
        return application;
    }
}

@EnableAsync
@Component
public class NotificationEventListener {
    
    private final NotificationService notificationService;
    
    // íŠ¸ëœì­ì…˜ ì»¤ë°‹ í›„ ë¹„ë™ê¸° ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬ ë° ì‘ë‹µ
    @Async
    @TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
    public void handleNotificationEvent(NotificationEvent event) {
        Notification notification = event.getEvent();
        notificationService.send(notification);
    }
}
```
<br>
<br>

## ì˜ˆì™¸ ì²˜ë¦¬

Spring AOPì—ì„œ ì§€ì›í•˜ëŠ” `@RestControllerAdvice`ë¥¼ í†µí•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë‚´ í•¸ë“¤ëŸ¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ë°œìƒí•œ ëŸ°íƒ€ì„ ì˜ˆì™¸ë¥¼ ì—ìŠ¤íŒ©íŠ¸ë¡œ ê°„ì£¼í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤. 
`@RestControllerAdvice`ëŠ” ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì— ì–´ë“œë°”ì´ìŠ¤ë¡œ ì ìš©ë˜ëŠ” `@ControllerAdvice`ì˜ ì‘ë‹µì„ `@ResponseBody`ë¥¼ í†µí•´ jsonìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.
ë”°ë¼ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ì ì—ì„œ ë‹¤ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì™€ ê°™ì´ ì¼ê´€ì ì¸ ì‘ë‹µ ì‘ì„±ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ì´ ë•Œ ì‘ë‹µì˜ ë‚´ìš©ì€ `ExceptionResponse`ë¥¼ í†µí•´ ì±„ì›Œì§‘ë‹ˆë‹¤. 
</br>
</br>
ì»¨íŠ¸ë¡¤ëŸ¬ ì–´ë“œë°”ì´ìŠ¤ì—ì„œ ê°ì§€í•œ ì˜ˆì™¸ëŠ” ê·¸ ì˜ˆì™¸ì˜ íƒ€ì…ì— ë”°ë¼ `@ExceptionHandler`ë¥¼ í†µí•´ ì²˜ë¦¬ë©ë‹ˆë‹¤. 
í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” í•¸ë“¤ëŸ¬ ë©”ì„œë“œì˜ ì•„ê·œë¨¼íŠ¸ê°€ ì˜ëª»ë˜ì—ˆê±°ë‚˜, ì…ë ¥ëœ ê°’ì´ ì—”í‹°í‹° ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í†µê³¼í•˜ì§€ ëª»í•˜ê±°ë‚˜, ì €í¬ê°€ ì§€ì •í•œ ì»¤ìŠ¤í…€ ì˜ˆì™¸ê°€ ë°œìƒí•œ ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì§€ì •í•˜ì˜€ìŠµë‹ˆë‹¤. 
</br>
</br>
 

``` java
@RestControllerAdvice
public class GlobalExceptionAdvice {

    @ExceptionHandler(CustomRuntimeException.class) // ì»¤ìŠ¤í…€ ì˜ˆì™¸ ë°œìƒ ì²˜ë¦¬ 
    public ExceptionResponse handleCustomRuntimeException(CustomRuntimeException customRuntimeException) {

        return ExceptionResponse.of(customRuntimeException);
    }

    @ExceptionHandler(MethodArgumentNotValidException.class) // ì˜ëª»ëœ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ ì¸ìë¡œ ë°œìƒí•œ ì˜ˆì™¸ ì²˜ë¦¬
    @ResponseStatus(HttpStatus.BAD_REQUEST)
    public ExceptionResponse handlerMethodArgumentNotValidException(MethodArgumentNotValidException exception) {

        return ExceptionResponse.of(exception.getBindingResult());
    }

    @ExceptionHandler(ConstraintViolationException.class) // ì—”í‹°í‹° ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í–ˆì„ ë•Œ ì˜ˆì™¸ ì²˜ë¦¬
    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
    public ExceptionResponse handlerConstraintViolationException(ConstraintViolationException exception) {

        return ExceptionResponse.of(exception.getConstraintViolations());
    }
}

```
<br>
<br>


## í…ŒìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ëŠ” í•„ìš”ì— ë”°ë¼ ìœ ë‹› í…ŒìŠ¤íŠ¸, ìŠ¬ë¼ì´ìŠ¤, í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.

`@TestComponent`ì™€ `@TestPropertySource`ë¥¼ í™œìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ì—ì„œë§Œ í•„ìš”í•œ í™˜ê²½ì„ ì„¤ì •í•˜ì—¬ ì–´ë–¤ í™˜ê²½ì—ì„œë„ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

```java
@RecordApplicationEvents
@TestPropertySource(locations = {"/application.properties", "/application-oauth-local.properties"})
@Import(TestDBInstance.class)
@SpringBootTest
@AutoConfigureMockMvc
class ApplicationControllerTest {

    @Autowired
    MockMvc mockMvc;

    @Autowired
    private ApplicationRepository applicationRepository;

    @Autowired
    private NotificationRepository notificationRepository;

    @Test
    public void test(){
        //...
    }
}

@RequiredArgsConstructor
@TestConfiguration
public class TestDBInstance {
    
    private final UserRepository userRepository;
    
    @Bean
    public void populate(){
        User user = User.builder().email("test1").build();
        userRepository.save(user);
    }
}

```
</br>

í…ŒìŠ¤íŠ¸í•˜ê³ ì í•˜ëŠ” ê¸°ëŠ¥ì— ì§‘ì¤‘í•˜ê¸° ìœ„í•´ mockitoë¥¼ í†µí•´ í•„ìš” ì—†ëŠ” ì˜ì¡´ì„±ì€ mocking í•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ì˜€ìŠµë‹ˆë‹¤.
ì‹¤ì œ ë©”ì„œë“œê°€ í˜¸ì¶œ ë  ë•Œ mocking ê°ì²´ê°€ ì´ë¥¼ ê°€ë¡œì±„ ì‚¬ìš©ìê°€ ì§€ì •í•œ ë©”ì„œë“œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.  

```java
@ExtendWith(MockitoExtension.class)
@AutoConfigureMockMvc
@ContextConfiguration(classes = {UserServiceImpl.class})
@SpringBootTest
public class UserServiceTest {

    @MockBean
    private StorageSevice storageSevice;
    
    @MockBean
    private TagService tagService;
    
    @MockBean
    private UserRepository userRepository;
    
    @Test
    public void givenMultipartFile_whenUserCreated_thenSuccess() throws IOException {
        
        given(storageService.store(Mockito.any(MultipartFile.class))).willReturn("savedFileName");
        given(tagService.findByName(Mockito.anyString())).willReturn(Mockito.mock(Tag.class));
        given(userRepository.save(Mockito.any(User.class))).willReturn(testUser);

        //when
        User createdUser = userService.createUser(testUser, mockMultipartFile);

        //then
        assertEquals(testUser.getImg(), createdUser.getImg());
        assertEquals(testUser.getMyImg(), createdUser.getMyImg());

    }

}

```

<br>


ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸í‹‘ ì‚¬ìš©í•˜ì—¬ì•¼ í•˜ë”ë¼ë„ í•„ìš”í•œ ì»¨í…ìŠ¤íŠ¸ë§Œ ë¡œë“œí•˜ì—¬ í…ŒìŠ¤íŠ¸ ì˜¤ë²„í—¤ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```java
@ContextConfiguration(classes = AppKeyConfig.class)
@SpringBootTest(properties = "jwt.secret=${random.uuid}")
public class AppKeyConfigTest {

    @Autowired
    SecretKeyHolder secretKeyHolder;

    @Test
    public void JwtSecretKeyFinal() {
        String key = secretKeyHolder.getSecretKey();
        String key2 = secretKeyHolder.getSecretKey();

        Assertions.assertEquals(key, key2);
    }
}
```
<br>




## ê¸°íš ë¬¸ì„œ

- [ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ](https://docs.google.com/spreadsheets/d/1YQc8KwcKyAEsbhF_-LmGuVD35DMIdXNNGF-e1COYyHk/edit#gid=0)
- [í™”ë©´ ì •ì˜ì„œ](https://www.notion.so/67392033074049daaca51da6605c83af)

<br/>

## ğŸ’ğŸ»â€â™€ï¸ íŒ€ì› ì†Œê°œ

|                                                                                     ë°©í˜„ìˆ˜(BE íŒ€ì¥)                                                                                      |                                                                               ìµœì˜ë¯¼(BE)                                                                                |                                                ì •ìš°ìš©(FE)                                                |                                               ê¹€ì€ì£¼(FE)                                               |
| :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------: |
| <img src="https://e7.pngegg.com/pngimages/91/840/png-clipart-super-mario-odyssey-super-mario-3d-land-new-super-mario-bros-wii-mario-heroes-nintendo-thumbnail.png" width=100 height=100> | <img src="https://static.wikia.nocookie.net/mariokart/images/0/09/GoombaNSMB.jpg/revision/latest/top-crop/width/360/height/450?cb=20080728222842" width=100 height=100> | <img src="https://i.pinimg.com/474x/78/58/5d/78585da7ee6b5cd6a58f35c9e39acc22.jpg" width=100 height=100> | <img src="https://upload.wikimedia.org/wikipedia/en/b/b2/Koopa_Troopa_NSMBU.png" width=100 height=100> |
|                                                                       [thom-droid](https://github.com/thom-droid)                                                                        |                                                                 [aprochoi](https://github.com/aprochoi)                                                                 |                                 [cleats01](https://github.com/cleats01)                                  |                                  [ekim49](https://github.com/ekim49)                                   |

<br/>

## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ
#### Web Communication

![REST API](https://img.shields.io/badge/REST_API-005C84?style=flat) ![HTTPS](https://img.shields.io/badge/HTTPS-red?style=flat)
</br>

#### Frontend

![React](https://img.shields.io/badge/react-16-%2320232a.svg?style=flat)
![React Query](https://img.shields.io/badge/React%20Query-FF4154?style=flat)
![Styled Components](https://img.shields.io/badge/Styled--Components-DB7093?style=flat)
![JavaScript](https://img.shields.io/badge/Javascript-ES6-%23323330.svg?style=flat)
![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=flat)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=flat)
</br>
#### Backend

![Java](https://img.shields.io/badge/Java-11-1572B6.svg?style=flat&logoColor=white)
![Spring Boot](https://img.shields.io/badge/Spring_Boot-2.7.3-6DB33F.svg?style=flat)
![Apache Tomcat](https://img.shields.io/badge/Apache_Tomcat-9.0-%23F8DC75.svg?style=flat)
![MySQL](https://img.shields.io/badge/MySQL-8.0-005C84?style=flat)
</br>
![Spring Boot Test](https://img.shields.io/badge/Spring_Boot_Test-2.7.3-6DB33F?style=flat)
![JUnit](https://img.shields.io/badge/JUnit-5.8.2-005C84?style=flat)
![Mockito](https://img.shields.io/badge/Mockito-4.5.1-red?style=flat)
</br>
![AWS SDK](https://img.shields.io/badge/AWS_SDK-2.20.17-blue.svg?style=flat&logoColor=white)
![AWS](https://img.shields.io/badge/EC2-orange.svg?style=flat)
![AWS](https://img.shields.io/badge/CloudFront-blueviolet.svg?style=flat)
![AWS](https://img.shields.io/badge/ALB-yellow.svg?style=flat&logoColor=white)
![AWS](https://img.shields.io/badge/RDS-blue.svg?style=flat&logoColor=white)
![AWS](https://img.shields.io/badge/S3-darkeyellow.svg?style=flat&logoColor=white)
![AWS](https://img.shields.io/badge/CodeDeploy-blue.svg?style=flat&logoColor=white)
</br>

#### Tools & Collaboration

![Git](https://img.shields.io/badge/GIT-E44C30?style=flat&logo=git&logoColor=white)
![GitHub](https://img.shields.io/badge/GitHub-100000?style=flat&logo=github&logoColor=white)
![Postman](https://img.shields.io/badge/Postman-FF6C37?style=flat&logo=Postman&logoColor=white)
![Netlify](https://img.shields.io/badge/netlify-%23000000.svg?style=flat&logo=netlify&logoColor=#00C7B7)
![Figma](https://img.shields.io/badge/figma-%23F24E1E.svg?style=flat&logo=figma&logoColor=white)
![Notion](https://img.shields.io/badge/Notion-%23000000.svg?style=flat&logo=notion&logoColor=white)

